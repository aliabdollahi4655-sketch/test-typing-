<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <title>ØªØ³Øª Ø³Ø±Ø¹Øª ØªØ§ÛŒÙ¾ - Ù†Ø³Ø®Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø¢ÙÙ„Ø§ÛŒÙ†</title>
  <style>
    body {
      font-family: Tahoma, sans-serif;
      background-color: #eef2f7;
      margin: 0;
      padding: 30px;
      direction: rtl;
      text-align: center;
    }
    #test-box {
      background: white;
      max-width: 1000px;
      margin: auto;
      padding: 25px;
      box-shadow: 0 0 15px #ccc;
      border-radius: 10px;
    }
    h1 {
      color: #222;
      margin-bottom: 20px;
    }
    #timer {
      font-size: 24px;
      margin-bottom: 15px;
    }
    #words-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 10px;
      background: #f9f9f9;
      padding: 15px;
      max-height: 280px;
      overflow-y: auto;
      border: 1px solid #ddd;
      border-radius: 6px;
      text-align: center;
      font-size: 20px;
    }
    .word {
      padding: 5px;
      border-radius: 5px;
    }
    .current {
      background-color: yellow;
    }
    .correct {
      color: green;
    }
    .incorrect {
      color: red;
    }
    #input {
      margin-top: 20px;
      font-size: 20px;
      padding: 10px;
      width: 80%;
    }
    #result {
      margin-top: 25px;
      font-size: 18px;
      color: #0a4d00;
      text-align: right;
      line-height: 2;
    }
    .stats-box {
      text-align: right;
      padding: 10px 20px;
      font-size: 18px;
    }
    #restart-btn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      background-color: #1976d2;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #restart-btn:hover {
      background-color: #0d47a1;
    }
  </style>
</head>
<body>
  <div id="test-box">
    <h1>ØªØ³Øª Ø³Ø±Ø¹Øª ØªØ§ÛŒÙ¾ (Ù†Ø³Ø®Ù‡ Ú©Ø§Ù…Ù„ Ùˆ Ø¢ÙÙ„Ø§ÛŒÙ†)</h1>
    <div id="timer">Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: 60 Ø«Ø§Ù†ÛŒÙ‡</div>
    <div id="words-container"></div>
    <input id="input" placeholder="Ø´Ø±ÙˆØ¹ Ø¨Ù‡ ØªØ§ÛŒÙ¾ Ú©Ù†ÛŒØ¯..." autofocus />
    <div id="result" class="stats-box"></div>
    <button id="restart-btn">ğŸ” Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯</button>
  </div>

  <script>
    const wordList = [
      "Ø³Ù„Ø§Ù…", "Ú©ØªØ§Ø¨", "Ø®Ø§Ù†Ù‡", "Ù…Ø§Ø´ÛŒÙ†", "Ø¯ÙˆØ³Øª", "Ø¨Ø±Ù†Ø§Ù…Ù‡", "Ù…Ø¯Ø±Ø³Ù‡", "Ø¯Ø§Ù†Ø´Ø¬Ùˆ",
      "Ø®ÙˆØ±Ø´ÛŒØ¯", "Ù‚Ù„Ù…", "Ú¯ÙˆØ´ÛŒ", "Ø±Ø§ÛŒØ§Ù†Ù‡", "Ù„Ø¨Ø®Ù†Ø¯", "Ú©ÙˆÙ‡", "Ø¯Ø±ÛŒØ§", "Ù¾Ø¯Ø±", "Ù…Ø§Ø¯Ø±",
      "Ø¯Ø±Ø³", "Ù…ÙˆÙÙ‚ÛŒØª", "Ú©Ù„Ø§Ø³", "Ø¢Ø³Ù…Ø§Ù†", "Ù„Ø¨Ø§Ø³", "Ù…ÙˆØ¨Ø§ÛŒÙ„", "ÙØ±ØµØª", "Ù…Ù‡Ø§Ø±Øª",
      "Ø¯ÙˆØ±Ø¨ÛŒÙ†", "Ø®Ù†Ø¯Ù‡", "Ø´Ø¨", "Ø±ÙˆØ²", "Ø¨Ø§Ø²ÛŒ", "Ú©ÙˆØ¯Ú©", "ØªØ§ÛŒÙ¾", "Ù‡ÙˆØ´", "ØªØµÙˆÛŒØ±",
      "Ø°Ù‡Ù†", "ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ", "ØªÙ…Ø±ÛŒÙ†", "Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡", "Ø±ÙˆØ´Ù†Ø§ÛŒÛŒ", "Ø®Ø§Ù…ÙˆØ´ÛŒ", "Ø±Ù†Ú¯", "Ù¾ÙˆØ´Ø§Ú©",
      "Ø²ÛŒØ¨Ø§ÛŒÛŒ", "Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ±", "Ø¯Ù‚Øª", "Ø³Ø±Ø¹Øª", "Ù…ÙˆØ³ÛŒÙ‚ÛŒ", "ØªØµØ§Ø¯Ù", "Ù…Ù‡Ø±Ø¨Ø§Ù†ÛŒ", "Ø¯ÙˆØ³ØªÛŒ",
      "Ø´Ø§Ø¯ÛŒ", "Ù‚Ø§Ù†ÙˆÙ†", "Ø·Ø¨ÛŒØ¹Øª", "Ù¾Ø±Ù†Ø¯Ù‡", "Ø¢Ø²Ø§Ø¯ÛŒ", "Ù¾Ù†Ø¬Ø±Ù‡", "Ø³ÙØ±", "Ù‡Ø¯Ù", "ØªÙˆØ§Ù†Ø§ÛŒÛŒ",
      "Ø³Ú©ÙˆØª", "Ù‚ÙˆÛŒ", "Ø¶Ø¹ÛŒÙ", "ØºØ°Ø§", "ÙÚ©Ø±", "Ø§Ø­Ø³Ø§Ø³", "Ù‚Ù„Ø¨", "Ú©Ø§Ø±", "Ø­ÙˆØµÙ„Ù‡", "Ù…Ø¹Ù„Ù…",
      "Ù…Ø¯ÛŒØ±", "Ø³Ø§Ø¹Øª", "Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø±", "Ù…Ù‡Ù†Ø¯Ø³", "Ø¯Ø§Ù†Ø´", "Ù‚Ø¯Ø±Øª", "Ú©Ù„Ù…Ù‡", "Ø³Ø±Ú¯Ø±Ù…ÛŒ",
      "Ø¨Ø±Ù†Ø¯Ù‡", "Ø¨Ø§Ø²Ù†Ø¯Ù‡", "Ù…Ø¨Ø§Ø±Ø²Ù‡", "Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡", "ØµÙØ­Ù‡", "Ø´Ú©Ø³Øª", "Ù¾ÛŒØ´Ø±ÙØª", "Ø±ÙˆÛŒØ§"
    ];

    let words = [], currentIndex = 0;
    let correctCount = 0, wrongCount = 0, keystrokes = 0;
    let timeLeft = 60, started = false, interval;

    const wordsContainer = document.getElementById("words-container");
    const input = document.getElementById("input");
    const timer = document.getElementById("timer");
    const result = document.getElementById("result");
    const restartBtn = document.getElementById("restart-btn");

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function initWords() {
      const repeatTimes = 8;
      words = [];
      for (let i = 0; i < repeatTimes; i++) {
        words = words.concat(shuffle([...wordList]));
      }
      words = words.slice(0, 500);

      wordsContainer.innerHTML = "";
      words.forEach((word, i) => {
        const span = document.createElement("span");
        span.className = "word";
        span.id = "word-" + i;
        span.textContent = word;
        if (i === 0) span.classList.add("current");
        wordsContainer.appendChild(span);
      });
    }

    function startTimer() {
      started = true;
      interval = setInterval(() => {
        timeLeft--;
        timer.textContent = `Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: ${timeLeft} Ø«Ø§Ù†ÛŒÙ‡`;
        if (timeLeft === 0) endTest();
      }, 1000);
    }

    function endTest() {
      clearInterval(interval);
      input.disabled = true;
      const totalWords = correctCount + wrongCount;
      const accuracy = totalWords === 0 ? 0 : Math.round((correctCount / totalWords) * 100);
      const wpm = correctCount;
      const topSpeed = wpm;
      result.innerHTML = `
        <strong>Ù†ØªÛŒØ¬Ù‡:</strong><br>
        Ø³Ø±Ø¹Øª ØªØ§ÛŒÙ¾ (WPM): <b>${wpm}</b><br>
        Ø­Ø¯Ø§Ú©Ø«Ø± Ø³Ø±Ø¹Øª (Top): <b>${topSpeed}</b><br>
        Ø¯Ù‚Øª (Accuracy): <b>${accuracy}%</b><br>
        Ø¶Ø±Ø¨ Ú©Ù„ÛŒØ¯ (Keystrokes): <b>${keystrokes}</b><br>
        Ú©Ù„Ù…Ø§Øª Ø¯Ø±Ø³Øª: <b>${correctCount}</b><br>
        Ú©Ù„Ù…Ø§Øª Ø§Ø´ØªØ¨Ø§Ù‡: <b>${wrongCount}</b><br>
      `;
    }

    function resetTest() {
      clearInterval(interval);
      timeLeft = 60;
      currentIndex = 0;
      correctCount = 0;
      wrongCount = 0;
      keystrokes = 0;
      started = false;
      input.disabled = false;
      input.value = "";
      result.innerHTML = "";
      timer.textContent = `Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: 60 Ø«Ø§Ù†ÛŒÙ‡`;
      initWords();
      input.focus();
    }

    input.addEventListener("input", () => {
      if (!started) startTimer();
      keystrokes++;

      if (input.value.endsWith(" ")) {
        const typed = input.value.trim();
        const currentWord = words[currentIndex];
        const span = document.getElementById("word-" + currentIndex);

        if (typed === currentWord) {
          span.classList.add("correct");
          correctCount++;
        } else {
          span.classList.add("incorrect");
          wrongCount++;
        }

        span.classList.remove("current");
        currentIndex++;
        const next = document.getElementById("word-" + currentIndex);
        if (next) next.classList.add("current");

        input.value = "";
      }
    });

    restartBtn.addEventListener("click", resetTest);

    initWords();
  </script>
</body>
</html>